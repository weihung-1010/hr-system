<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="pragma" content="no-cache">
  <meta http-equiv="cache-control" content=" no-cache">
  <meta http-equiv="expires" content="0">
  <title>薪資結算</title>
  <link rel="stylesheet" type="text/css" href="../css/fontawesome-free-6.1.2-web/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
  <link rel="stylesheet" type="text/css" href="../css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
  <link rel="stylesheet" type="text/css" href="../css/controlHome.css">
  <link rel="stylesheet" type="text/css" href="../css/signOff.css">
  <style>
      .status-undone{
        font-size: 1rem;
        color: #ce1717;
      }

      .status-done{
        font-size: 1rem;
        color: #28c93e;
      }
      
  </style>
</head>

<body>
  <header class="navbar sticky-top">
    <div class=" container">
      <a href="javascript:history.go(-1);"><img src="../assets/back.png" alt=""></a>
      <div class="header-title"></div>
      <button class="turn-down" type="button" data-bs-toggle="modal" data-bs-target="#exampleModal"><i class="fa-light fa-pen"></i>薪水計算</button>
    </div>
  </header>
  
  <div class="title-wrapper">
    <div class="title">薪資結算</div>
  </div>

  <div class="content-wrapper">
    <div class="content-title">2023.1月薪資明細</div>
    <div class="content-title">XXX</div>
    <div class="content-box-items">編號:987654321</div>
    <div class="content-box">
      <div class="items-wrapper">
        <div class="content-box-items">請假次數</div>
        <div class="content-box-items">1次</div>
      </div>
      <div class="items-wrapper">
        <div class="content-box-items">晚退次數</div>
        <div class="content-box-items">1次</div>
      </div>
      <div class="items-wrapper">
        <div class="content-box-items">遲到</div>
        <div class="content-box-items">0次</div>
      </div>
      <div class="items-wrapper">
        <div class="content-box-items">工作時數</div>
        <div class="content-box-items">198hr</div>
      </div>
      <div class="items-wrapper">
        <div class="content-box-items">本俸</div>
        <div class="content-box-items" id="salary">0</div>
      </div>
      <div class="items-wrapper">
        <div class="content-box-items">全勤獎金</div>
        <div class="content-box-items" id="full-price">0</div>
      </div>
      <div class="items-wrapper">
        <div class="content-box-items">加班</div>
        <div class="content-box-items" id="overtime">0</div>
      </div>
      <div class="items-wrapper">
        <div class="content-box-items">勞保</div>
        <div class="content-box-items" id="insure-price">0</div>
      </div>
      <div class="items-wrapper">
        <div class="content-box-items">健保</div>
        <div class="content-box-items" id="health-price">0</div>
      </div>
      <div class="items-wrapper">
        <div class="content-box-items">其他加給</div>
        <div class="content-box-items" id="other">0</div>
      </div>
      <div class="items-wrapper">
        <div class="content-box-items">其他扣除</div>
        <div class="content-box-items" id="otherMinus">0</div>
      </div>
      <div class="items-wrapper total-box">
        <div class="content-box-title" >總計</div>
        <span class="content-box-title" id="total">0$</span>
      </div>
    </div>
    <div class="btn-box">
      <button class="" type="button">結算完成</button>
    </div>
  </div>


  <!-- 輸入計算Modal -->
  <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">輸入細項</h5>
        </div>
        <div class="modal-body">
          <div class="items-wrapper">
            <div class="content-box-items">本俸</div>
            <input type="number" id="basicSalary">
          </div>
          <div class="items-wrapper">
            <div class="content-box-items">全勤獎金</div>
            <input type="number" id="perfectPrice">
          </div>
          <div class="items-wrapper">
            <div class="content-box-items">加班</div>
            <input type="number" id="overTimePrice">
          </div>
          <div class="items-wrapper">
            <div class="content-box-items" >勞保</div>
            <input type="number" id="reduce1">
          </div>
          <div class="items-wrapper">
            <div class="content-box-items" >健保</div>
            <input type="number" id="reduce2">
          </div>
          <div class="items-wrapper">
            <div class="content-box-items">其他加給</div>
            <input type="number" id="otherPrice">
          </div>
          <div class="items-wrapper">
            <div class="content-box-items">其他扣除</div>
            <input type="number" id="otherMinusPrice">
          </div>
        </div>
        <div class="modal-footer modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
          <button type="button" class="btn btn-primary" id="calculate">送出</button>
        </div>
      </div>
    </div>
  </div>

  <footer>
    <div class="footer-wrapper fixed-bottom">
      <a href="companyInfo.html"><i class="fa-sharp fa-regular fa-house"></i></a>
      <a href="attendance.html"><i class="fa-light fa-ballot-check"></i></a>
      <a href="adminCalender.html"><i class="fa-light fa-calendar-days"></i></a>
      <a href="adminSignOff.html"><i class="fa-light fa-pen-field"></i></a>
      <a href="leaveApplication.html"><i class="fa-light fa-note"></i></a>
      <a href="adminWorkOrder.html"><i class="fa-light fa-file-import"></i></a>
    </div>
  </footer>


  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.3/jquery.min.js"
    integrity="sha512-STof4xm1wgkfm7heWqFJVn58Hm3EtS31XFaagaa8VMReCXAkQnJZ+jEy8PCC/iT18dFy95WcExNHFTqLyp72eQ=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ"
    crossorigin="anonymous"></script>
    <script>

      // 若沒有數字回傳0
      function sanitizeInput(value) {
        if (isNaN(value)) {
          return 0;
        }
        return value;
      }

      // 薪水計算
      $(document).ready(function(){
        $('#calculate').click(function(){
          let basicSalary = sanitizeInput(parseFloat($('#basicSalary').val()));
          let perfectPrice = sanitizeInput(parseFloat($('#perfectPrice').val()));
          let overTimePrice = sanitizeInput(parseFloat($('#overTimePrice').val()));
          let reduce1 = sanitizeInput(parseFloat($('#reduce1').val()));
          let reduce2 = sanitizeInput(parseFloat($('#reduce2').val()));
          let otherPrice = sanitizeInput(parseFloat($('#otherPrice').val()));
          let otherMinusPrice = sanitizeInput(parseFloat($('#otherMinusPrice').val()));
          
          $('#salary').text(basicSalary.toLocaleString() + '$');
          $('#full-price').text(perfectPrice.toLocaleString() + '$');
          $('#overtime').text(overTimePrice.toLocaleString() + '$');
          $('#insure-price').text(reduce1.toLocaleString() + '$');
          $('#health-price').text(reduce2.toLocaleString() + '$');
          $('#other').text(otherPrice.toLocaleString() + '$');
          $('#otherMinus').text(otherMinusPrice.toLocaleString() + '$');
          $('#total').text((basicSalary + perfectPrice +overTimePrice + otherPrice - reduce1 - reduce2 - otherMinusPrice).toLocaleString() + '$');
          $('#exampleModal').modal('hide');
        });
      });
    </script>

</body>

</html>